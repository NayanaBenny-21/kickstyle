<div class="reset-box text-center">
    <h4 class="fw-bold mb-3">Change Password</h4>
    {{#if general_error}}
  <p class="text-danger">{{general_error}}</p>
{{/if}}
    <form action="/auth/forgot-password/reset" method="POST">
       <div class="mb-3 text-start position-relative">
      <label for="newPassword" class="form-label">
        New Password <span style="color: red">*</span>
      </label>
      <input
        type="password"
        id="newPassword"
        name="newPassword"
        class="form-control"
        placeholder="Enter new password"
        required
        pattern="(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,12}"
        title="Password must be 8â€“12 characters long and include at least one letter, one number, and one special character."
      >
      <button type="button" class="btn position-absolute toggle-eye"
        style="top: 70%; right: 10px; transform: translateY(-50%); background: none; border: none;"
        data-target="newPassword">
        <i class="fa-solid fa-eye"></i>
      </button>
    </div>

    <!-- Confirm Password -->
    <div class="mb-3 text-start position-relative">
      <label for="confirmPassword" class="form-label">
        Confirm Password <span style="color: red">*</span>
      </label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        class="form-control"
        placeholder="Re-enter new password"
        required
      >
      <button type="button" class="btn position-absolute toggle-eye"
        style="top: 70%; right: 10px; transform: translateY(-50%); background: none; border: none;"
        data-target="confirmPassword">
        <i class="fa-solid fa-eye"></i>
      </button>
    </div>

        <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-danger w-50">Save</button>
        </div>
    </form>

    <div class="text-center mt-3">
        <a href="/auth/login" class="text-decoration-none">&larr; Back to Login Page</a>
    </div>
</div>

<script>
  window.resetSuccess = {{#if resetSuccess}}true{{else}}false{{/if}};</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/user/change_password.js"></script>

<script>
  document.querySelectorAll(".toggle-eye").forEach(btn => {
    btn.addEventListener("click", () => {
      const input = document.getElementById(btn.dataset.target);
      const icon = btn.querySelector("i");

      if (input.type === "password") {
        input.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        input.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    });
  });
</script>
